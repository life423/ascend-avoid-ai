<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover, maximum-scale=1.0, minimum-scale=1.0"
        />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta
            name="apple-mobile-web-app-status-bar-style"
            content="black-translucent"
        />
        <meta name="theme-color" content="#0a192f" />

        <title>Ascend Avoid</title>
        
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
        
        <link rel="stylesheet" href="styles/index.css" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg">
        <link rel="alternate icon" type="image/png" sizes="32x32" href="/favicon-32.png">
    </head>
    <body>
        <!-- Loading indicator -->
        <div class="loader" id="loader"></div>
        
        <!-- Root app container -->
        <div class="app-root" data-app="ascend-avoid">
            <!-- Header section -->
            <header class="app-header">
                <h1>Ascend Avoid</h1>
                
                <!-- Score display -->
                <div class="score-panel" data-scores="main">
                    <h4>High Score: <span class="score-value" data-score="high">0</span></h4>
                    <h4>Score: <span class="score-value" data-score="current">0</span></h4>
                </div>
            </header>

            <!-- Main game section -->
            <main class="game-main" data-section="main">
                <!-- Game layout container -->
                <div class="game-area" data-section="game">
                    <!-- Canvas viewport wrapper -->
                    <div class="canvas-viewport" data-viewport="main">
                        <canvas
                            id="gameCanvas"
                            class="game-canvas"
                            data-canvas="primary"
                            aria-label="Ascend Avoid multiplayer game"
                            role="img"
                        ></canvas>
                    </div>
                </div>
            </main>

            <!-- Touch controls container -->
            <div class="control-panel" data-section="controls">
                <div class="touch-controller" data-controller="main">
                    <!-- Touch controls will be inserted here by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Orientation overlay for mobile users -->
        <div class="orientation-overlay">
            <div style="font-size: 4rem; margin-bottom: 1rem;">ðŸ“±</div>
            <h3>Rotate Your Device</h3>
            <p>Please rotate your device to landscape orientation for the best gaming experience.</p>
        </div>

        <!-- Game error handling -->
        <div class="error-panel" data-error="container" style="display: none;">
            <h3>Connection Error</h3>
            <p class="error-text" data-error="message">Unable to connect to game server.</p>
            <button onclick="window.location.reload()">Retry</button>
        </div>

        <!-- FIXED: Load main.ts instead of index.ts -->
        <script
            type="module"
            src="main.ts"
            onerror="document.querySelector('.error-panel[data-error=container]').style.display='block';"
        ></script>
    </body>
</html>